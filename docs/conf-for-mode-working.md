# Конфигурации режимов работы
В большинстве случаев необходима работа приложения в различных режимах, таких как:
- Разработки
- Тестирования
- Рабочей среды

Чтобы разделять приватные переменные, к примеру подключения к базе данных, таким образом при запуске тестов -
использовать тестовую базу данных, в период разработки - базу данных для разработки и соответственно в рабочей среде -
базу рабочей среды (и соответственно для каждой такой базы необходимы свои значение приватных переменных при тех же ключах). <br/>

> [!NOTE]
> Average поддерживает два формата считывания переменных для различных режимов работы: через файл конфигурации режима работы и через блок
режима работы указанный в названии определенного файла конфигурации

### Глобальный файл режима
Данный формат лучший вариант, если у Вас есть необходимость создать файл конфигурации ради малого количества переменных.
Таким образом, чтобы не плодить файлов з малым количеством переменных, такие переменные лучше записать в файл конфигурации определенного режима работы.

Average предусматривает следующие соглашения названий для файлов конфигурации режимов работы:
- `env.development.json` - для работы в режиме разработки.
- `env.test.json` - для работы в режиме тестирования.
- `env.production.json` - для работы в режиме рабочей среды.

И соответственно в структуре проекта:
```
.
├── config
|   └── env.development.json
|   └── env.test.json
|   └── env.production.json
```
При этом первый блок - `env` в любом из названий файлов режима конфигурации означает что это глобальный файл конфигурации для режима работы,
Второй же блок `development`, `test` или `production` определяет какой режим работы будет исполняться.

### Конкретный файл режима
Данный формат лучший вариант, если Вас необходимы различные значения ключей приватных переменных в различных режимах работы.
Average так устроен, что он считывает название Ваших файлов конфигурации. Если в названии файла указаны режимы работы
приложения, то они будут применяться в определенных режимах работы, таким образом избавляя Вас от дублирования кода.
```
.
├── config
|   └── http.development.json
|   └── http.test.json
```
Также поддерживаются несколько режимов работы для файлов конфигурации если их описывать через точку в названии файла.
Порядок описание режимов работы неважен
```
.
├── config
|   └── http.development.production.json
|   └── http.test.json
```

>Важно: слова "development", "test", "production", "env" зарезервированы и применяются для корректной работы режимов!**

### Запуск в нужном режиме
Для запуска приложения в определённом режиме работы, необходимо прописать `NODE_ENV` в Вашем `package.json`

<!-- tabs:start -->

#### **JavaScript**
```json
{
  "name": "my_app",
  "scripts": {
    "start:test": "NODE_ENV=test node index.js",
    "start:dev": "NODE_ENV=development node index.js",
    "start:prod": "NODE_ENV=production node index.js"
  }
}
```
#### **TypeScript**

```json
{
  "name": "my_app",
  "scripts": {
    "start:test": "NODE_ENV=test ts-node --files index.ts",
    "start:dev": "NODE_ENV=development ts-node --files index.ts",
    "start:prod": "NODE_ENV=production ts-node --files index.ts"
  }
}
```
<!-- tabs:end -->